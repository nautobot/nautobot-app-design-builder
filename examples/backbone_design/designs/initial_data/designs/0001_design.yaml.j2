---
manufacturers:
  - "!create_or_update:name": "Juniper"
    slug: "juniper"

device_types:
  - "!create_or_update:model": "PTX10016"
    slug: "ptx10016"
    manufacturer__slug: "juniper"
    u_height: 21

device_roles:
  - "!create_or_update:name": "Core Router"
    slug: "core_router"
    color: "3f51b5"

regions:
    "!create_or_update:name": "Americas"
    children:
    - "!create_or_update:name": "United States"
      children:
      - "!create_or_update:name": "US-East-1"
        sites:
        - "!create_or_update:name": "IAD5"
          status__name: "Active"
          "!ref": "iad5"
        - "!create_or_update:name": "LGA1"
          status__name: "Active"
          "!ref": "lga1"

      - "!create_or_update:name": "US-West-1"
        sites:
        - "!create_or_update:name": "LAX11"
          status__name: "Active"
          "!ref": "lax11"
        - "!create_or_update:name": "SEA1"
          status__name: "Active"
          "!ref": "sea1"

{% macro device(index, site) -%}
    - "!create_or_update:name": "core{{ index }}.{{ site }}"
      site: "!ref:{{ site }}"
      device_type__slug: "ptx10016"
      device_role__slug: "core_router"
      status__name: "Planned"
{% endmacro %}

devices:
    # IAD5 Core Router Pair
    {% for index in range(routers_per_site) %}
    {{ device(index, "iad5") }}
    {{ device(index, "lga1") }}
    {{ device(index, "lax11") }}
    {{ device(index, "sea1") }}
    {% endfor %}
